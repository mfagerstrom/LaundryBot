CREATE TABLE LAUNDRY_NOTIFICATIONS (
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  CHANNEL_ID VARCHAR2(32) NOT NULL,
  MESSAGE VARCHAR2(4000) NOT NULL,
  DUE_AT TIMESTAMP NOT NULL,
  SENT_AT TIMESTAMP,
  STATUS VARCHAR2(20) DEFAULT 'pending' NOT NULL,
  CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
  CREATED_BY_USER_ID VARCHAR2(32),
  CREATED_BY_NAME VARCHAR2(100),
  NOTES VARCHAR2(4000),
  CONSTRAINT LAUNDRY_NOTIFICATIONS_STATUS_CK CHECK (
    STATUS IN ('pending', 'sent', 'failed')
  )
);

CREATE INDEX LAUNDRY_NOTIFICATIONS_DUE_IDX
  ON LAUNDRY_NOTIFICATIONS (DUE_AT, STATUS);
